# HTTP 멱등성
- 하나의 요청이 아닌 여러 번 동일한 요청을 보냈을 때 서버가 같은 상태를 가지는 것

## HTTP 메서드와 멱등성
- HTTP 메서드 중 멱등성을 가지는 메서드는 GET, HEAD, OPTIONS, PUT, DELETE
- 가지지 않는 건 POST, PATCH

### 멱등성을 가지는 메서드
- GET
    - 여러 개의 동일한 GET 요청을 하는 것은 한 번의 요청을 하는 것과 같음(안전한 메서드)
- HEAD
    - GET 요청이 생성하는 응답의 헤더를 검색하는 데 사용됨.
    - 보통 리소스 전체를 다운로드 하는 오버헤드를 피하고 어떤 유형의 데어터가 반환되는 지, 해당 리소스가 있는지, 수정날짜 등을 확인하기 이ㅜ해 사용됨.
- OPTIONS
    - 대상 리소스의 통신 옵션(서버에서 지원하는 HTTP 메서드 등)을 가져올 때 사용됨.
- PUT
    - 리소스를 완전히 다른 버전으로 대체함.
    - 요청이 반복되면 동일한 리소스가 다시 대체되어 첫 번째 요청과 동일한 상태가 됨.
- DELETE
    - 리소스가 삭제되면 삭제 작업을 반복해도 시스템 상태가 더 이상 변경되지 않음

### 멱등성을 가지지 않는 메서드
- POST
    - 여러 POST 요청은 여러 리소스를 생성하는 결과를 초래하기 때문
    - idempotency Key를 보내 동일한 요청인 지를 식별함.
    - 이를 통해 동일한 작업의 재시도를 인식하고, 한 번만 처리되도록함.
    - 중복 트랜잭션을 피해야 하는 결제 처리 API에서 자주 사용됨.
- PATCH 
    - 리소스를 부분적으로 업데이트 하는 데 사용됨
    - 멱등성 여부는 PATCH를 실행하는 방법에 따라 다름.<br>
        예를 들어 필드를 특정값으로 수정하는 거면 멱등성을 가지지만, 특정 필드의 값을 증가시키거나 해당 배열에 요소를 추가시키는 거면 멱등성을 가지지 않음.

## 멱등성의 중요성
- 일관성 : 시스템 전반에 걸쳐 일관된 상태를 유지하는 데 도움됨.
- 유지보수 성 : 멱등성 HTTP 메서드로 API 통신할 땐 재시도를 처리하는 사이드 이펙트를 고려하지 않아도 되어 유지보수성 증가